<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Flappy Bird</title>

<style>
    body {
        background: skyblue;
        text-align: center;
        font-family: Arial;
    }
    canvas {
        background: #70c5ce;
        display: block;
        margin: auto;
        border: 3px solid black;
    }
</style>
</head>

<body>

<h1>üê¶ Flappy Bird</h1>
<p>ESPACE pour voler</p>
<canvas id="game" width="400" height="500"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let birdY = 250;
let gravity = 1.5;
let velocity = 0;

let pipeX = 400;
let pipeGap = 130;
let pipeTopHeight = 150;

let score = 0;

document.addEventListener("keydown", function(e) {
    if (e.keyCode === 32) velocity = -10;
});

function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);

    velocity += gravity;
    birdY += velocity;

    ctx.fillStyle = "yellow";
    ctx.fillRect(80, birdY, 30, 30);

    pipeX -= 3;

    ctx.fillStyle = "green";
    ctx.fillRect(pipeX, 0, 50, pipeTopHeight);
    ctx.fillRect(pipeX, pipeTopHeight + pipeGap, 50, canvas.height);

    if (pipeX < -50) {
        pipeX = canvas.width;
        pipeTopHeight = Math.random() * 200 + 50;
        score++;
    }

    if (
        birdY <= 0 ||
        birdY + 30 >= canvas.height ||
        (pipeX < 110 && pipeX + 50 > 80 &&
        (birdY < pipeTopHeight || birdY > pipeTopHeight + pipeGap))
    ) {
        alert("Game Over üòµ Score : " + score);
        document.location.reload();
    }

    ctx.fillStyle = "black";
    ctx.fillText("Score : " + score, 10, 20);

    requestAnimationFrame(draw);
}

draw();
</script>

</body>
</html>
